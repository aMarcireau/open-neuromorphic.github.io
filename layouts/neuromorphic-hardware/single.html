{{ define "main" }}
  {{ partial "page-header" . }}
  <section class="section pt-6">
    <div class="container">
      {{/* Row 1: "At a Glance" section, full width */}}
      <div class="row mb-8">
        <div class="lg:col-12">
          <div class="content-panel p-6 shadow-lg">
            {{ partial "hardware/product-info" .Page }}
          </div>
        </div>
      </div>

      {{/* Row 2: Main content and sidebar */}}
      <div class="row lg:items-stretch">
        <article
          class="{{ if gt (len .TableOfContents) 80 }}lg:col-8{{ else }}lg:col-10 mx-auto{{ end }}">
          <p class="mb-6 text-xl">{{ .Params.summary }}</p>
          <div class="content-panel p-6 shadow-lg mb-8">
            {{ partial "hardware/company-info" .Page }}
          </div>
          <div class="content mb-10">
            {{ .Content }}
          </div>
          
          {{/* --- SHARING & SUPPORT CTA SECTION --- */}}
          <div class="border-t border-border dark:border-darkmode-border mt-10 pt-8 text-center">
            <h3 class="text-2xl font-bold mb-3">Enjoyed This Post? Support Our Community</h3>
            <p class="mb-6 text-gray-700 dark:text-gray-300 max-w-2xl mx-auto">
              Thanks for reading! If you made it this far, you might be interested in supporting us. Sharing our posts helps amplify our signal and get the word outâ€”it's an extremely valuable way to support our community, along with linking to our content from your website.
            </p>
            {{ partial "components/og-preview.html" . }}
          </div>
          {{/* --- END SHARING & SUPPORT CTA SECTION --- */}}
          
        </article>
        {{ partial "components/sidebar-toc-shared.html" . }}
      </div>

      <!-- Related posts -->
      {{ $related := (where site.RegularPages "Section" "blog") | intersect (where
      site.RegularPages ".Title" "!=" .Title) | union (site.RegularPages.Related . ) }}
      {{ $related = $related | shuffle | first 3 }}
      {{ with $related }}
        <div class="section pb-0">
          <div class="row">
            {{ range . }}
              <div class="lg:col-4">
                {{ partial "components/blog-card" . }}
              </div>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </section>
{{ end }}
