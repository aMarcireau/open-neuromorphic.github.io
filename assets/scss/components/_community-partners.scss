// assets/scss/components/_community-partners.scss
.community-partners-section {
  .partners-slider-wrapper {
    overflow: hidden;
    -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
    mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
  }

  .partners-track {
    animation: scroll 40s linear infinite;
    &:hover {
      animation-play-state: paused;
    }
  }

  .partner-logo {
    filter: grayscale(100%) contrast(70%) brightness(1.2);
    opacity: 0.7;
    transition: all 0.3s ease-in-out;
  }

  .partner-logo-link:hover .partner-logo,
  .partner-logo-link.is-highlighted .partner-logo {
    filter: grayscale(0%);
    opacity: 1;
    transform: scale(1.05);
  }

  .bubbles-container {
    @apply absolute inset-0 pointer-events-none;
    -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
    mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
  }

  @keyframes scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }
}

.contribution-bubble {
  @apply absolute top-0 left-0 bg-dark dark:bg-darkmode-theme-dark text-white dark:text-darkmode-text rounded-lg shadow-lg z-20 dark:border-2 dark:border-darkmode-border;
  @apply opacity-0 invisible transition-opacity ease-in-out;
  transition-duration: 150ms;
  will-change: opacity, transform;
  max-width: 280px;
  padding: 0.75rem;
  text-align: left;
  font-weight: 400;

  &.visible {
    @apply opacity-100;
    visibility: visible;
  }

  // Bubble tail (light mode)
  &::after {
    content: '';
    @apply absolute top-full left-1/2 -translate-x-1/2;
    @apply w-0 h-0 border-x-8 border-x-transparent border-t-8;
    border-top-color: theme('colors.dark');
  }
}

.bubble-title {
  @apply font-bold text-sm mb-1 text-white;
}

.bubble-description {
  @apply text-xs text-gray-300 dark:text-gray-400 leading-snug;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.bubble-separator {
  @apply h-px bg-gray-600 dark:bg-gray-500 my-2;
}

.bubble-contributions {
  @apply text-xs font-semibold;
}


// Dark mode styles for the bubble's tail to add a border
.dark .contribution-bubble {
  // Border for the tail
  &::before {
    content: '';
    @apply absolute top-full left-1/2 -translate-x-1/2;
    @apply w-0 h-0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid theme('colors.darkmode.border');
  }

  // Fill for the tail (sits on top of the border)
  &::after {
    border-top-color: theme('colors.darkmode.theme-dark');
    margin-top: -2px;
  }
}
